<!DOCTYPE html>
<html lang="{{ .Site.LanguageCode | default "en" }}">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary Meta Tags -->
  <title>{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}</title>
  <meta name="title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}" />
  <meta name="description" content="{{ if .Description }}{{ .Description }}{{ else if .Summary }}{{ .Summary | truncate 160 }}{{ else }}{{ .Site.Params.description }}{{ end }}" />
  <meta name="keywords" content="{{ if .Params.keywords }}{{ delimit .Params.keywords ", " }}{{ else }}{{ delimit .Site.Params.keywords ", " }}{{ end }}" />
  <meta name="author" content="{{ .Site.Params.author | default "R Journey" }}" />
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1" />
  <meta name="language" content="{{ .Site.LanguageCode | default "en" }}" />
  <meta name="revisit-after" content="7 days" />
  <meta name="theme-color" content="#0bb3f3" />

  <!-- Canonical URL -->
  <link rel="canonical" href="{{ .Permalink }}" />

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="{{ if .IsPage }}article{{ else }}website{{ end }}" />
  <meta property="og:url" content="{{ .Permalink }}" />
  <meta property="og:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}" />
  <meta property="og:description" content="{{ if .Description }}{{ .Description }}{{ else if .Summary }}{{ .Summary | truncate 160 }}{{ else }}{{ .Site.Params.description }}{{ end }}" />
  <meta property="og:image" content="{{ if .Params.image }}{{ .Params.image | absURL }}{{ else }}{{ .Site.Params.og_image | default "/assets/logo.jpg" | absURL }}{{ end }}" />
  <meta property="og:site_name" content="{{ .Site.Title }}" />
  <meta property="og:locale" content="{{ .Site.LanguageCode | default "en_US" }}" />
  {{ if .IsPage }}
  <meta property="article:published_time" content="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}" />
  <meta property="article:modified_time" content="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}" />
  {{ if .Params.categories }}
  {{ range .Params.categories }}
  <meta property="article:section" content="{{ . }}" />
  {{ end }}
  {{ end }}
  {{ if .Params.tags }}
  {{ range .Params.tags }}
  <meta property="article:tag" content="{{ . }}" />
  {{ end }}
  {{ end }}
  {{ end }}

  <!-- Twitter Card -->
  <meta name="twitter:card" content="{{ .Site.Params.twitter_card | default "summary_large_image" }}" />
  <meta name="twitter:url" content="{{ .Permalink }}" />
  <meta name="twitter:title" content="{{ if .IsHome }}{{ .Site.Title }}{{ else }}{{ .Title }} | {{ .Site.Title }}{{ end }}" />
  <meta name="twitter:description" content="{{ if .Description }}{{ .Description }}{{ else if .Summary }}{{ .Summary | truncate 160 }}{{ else }}{{ .Site.Params.description }}{{ end }}" />
  <meta name="twitter:image" content="{{ if .Params.image }}{{ .Params.image | absURL }}{{ else }}{{ .Site.Params.og_image | default "/assets/logo.jpg" | absURL }}{{ end }}" />
  {{ if .Site.Params.twitter_site }}
  <meta name="twitter:site" content="{{ .Site.Params.twitter_site }}" />
  {{ end }}

  <!-- Additional SEO -->
  <meta name="geo.region" content="US" />
  <meta name="geo.placename" content="United States" />
  <meta name="rating" content="general" />
  <meta name="distribution" content="global" />

  <!-- Favicon -->
  <link rel="icon" type="image/jpeg" href="/assets/logo.jpg" />
  <link rel="apple-touch-icon" href="/assets/logo.jpg" />

  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="{{ .Site.Title }} RSS Feed" href="{{ "index.xml" | absURL }}" />

  <!-- Preconnect for performance -->
  <link rel="preconnect" href="https://cdn.jsdelivr.net" />
  <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" />
  <link rel="preconnect" href="https://www.googletagmanager.com" />

  <!-- Stylesheets -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">

  {{ partial "styles.html" . }}

  <!-- Structured Data (JSON-LD) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "{{ if .IsPage }}Article{{ else }}Organization{{ end }}",
    {{ if .IsPage }}
    "headline": "{{ .Title }}",
    "description": "{{ if .Description }}{{ .Description }}{{ else if .Summary }}{{ .Summary | truncate 160 }}{{ else }}{{ .Site.Params.description }}{{ end }}",
    "datePublished": "{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}",
    "dateModified": "{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}",
    "author": {
      "@type": "Organization",
      "name": "{{ .Site.Params.author | default "R Journey" }}"
    },
    "publisher": {
      "@type": "Organization",
      "name": "{{ .Site.Title }}",
      "logo": {
        "@type": "ImageObject",
        "url": "{{ "/assets/logo.jpg" | absURL }}"
      }
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "{{ .Permalink }}"
    },
    {{ if .Params.categories }}
    "articleSection": "{{ index .Params.categories 0 }}",
    {{ end }}
    {{ else }}
    "name": "{{ .Site.Title }}",
    "description": "{{ .Site.Params.description }}",
    "url": "{{ .Site.BaseURL }}",
    "logo": "{{ "/assets/logo.jpg" | absURL }}",
    "sameAs": [],
    "contactPoint": {
      "@type": "ContactPoint",
      "email": "info@rjourney.org",
      "contactType": "Customer Service"
    }
    {{ end }}
  }
  </script>
</head>
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-Z72NP0M9FZ"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-Z72NP0M9FZ');
</script>

<body>
  {{ partial "navbar.html" . }}
  {{ block "main" . }}{{ end }}
  {{ partial "footer.html" . }}

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  {{ partial "analytics-events.html" . }}
</body>
</html>
